import React, { useState } from "react";

function App() {
const [formData, setFormData] = useState({
api_key: "",
api_secret: "",
bearer_token: "",
access_token: "",
access_token_secret: "",
wait_time: 30,
content: "",
media: null,
});

const handleChange = (e) => {
const { name, value, files } = e.target;
setFormData((prev) => ({
...prev,
[name]: files ? files[0] : value,
}));
};

const handleSubmit = async (e) => {
e.preventDefault();
const data = new FormData();
for (let key in formData) {
data.append(key, formData[key]);
}

const response = await fetch("/tweet-bot/", {
method: "POST",
body: data,
});
const result = await response.json();
alert(result.status);
};

return (
<div className="p-4 max-w-xl mx-auto">
    <h1 className="text-2xl font-bold mb-4">Twitter Bot Config</h1>
    <form onSubmit={handleSubmit} className="space-y-3">
        {["api_key", "api_secret", "bearer_token", "access_token", "access_token_secret", "content",
        "wait_time"].map((field) => (
        <input key={field} name={field} placeholder={field.replace(/_/g, " " )} value={formData[field]}
            onChange={handleChange} type={field==="wait_time" ? "number" : "text" }
            className="w-full p-2 border border-gray-300 rounded" />
        ))}
        <input type="file" name="media" onChange={handleChange} className="w-full" />
        <button type="submit" className="px-4 py-2 bg-blue-500 text-white rounded">
            Start Bot
        </button>
    </form>
</div>
);
}

export default App;